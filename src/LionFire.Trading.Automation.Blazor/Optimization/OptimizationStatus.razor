@using LionFire.ExtensionMethods
@inherits ReactiveComponentBase<OneShotOptimizeVM>

@rendermode InteractiveServer

<div class="py-4 LevelsOfDetail">
    <MudGrid>
        <MudItem sm="1">
            <MudTextField @bind-Value="ViewModel!.POptimization2.MaxBacktests" Label="Max Backtests" Dense="@true" />
            <MudSlider T="double" @bind-Value="ViewModel.MaxBacktestsExponential"
                       Min=6 Max=34
                       Label="Max Backtests" Dense="@true" />
        </MudItem>

        @foreach (var level in ViewModel!.POptimization2.LevelsOfDetailEnumeration.WithIndex())
        {
            <MudItem Class="Level" sm="1">
                <MudText Typo="Typo.h6">Level @level.item.Level</MudText>
                <div>@level.item.TestPermutationCount tests</div>
            </MudItem>
        }

        <div class="lf-field">
            <div class="label">Comprehensive Scan</div>
            <div class="value">@ViewModel.POptimization2.LevelsOfDetail.ComprehensiveScanTotal</div>
        </div>
        <div class="lf-field">
            <div class="label">Comprehensiveness</div>
            <div class="value">@((ViewModel.POptimization2.LevelsOfDetail.ComprehensiveScanPerUn).ToString("P0"))</div>
        </div>
    </MudGrid>
</div>

